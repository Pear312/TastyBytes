{% extends "base.html" %}
{% block content %}

<!-- LIST MODE -->
{% if recipe_list %}
<h1>All Recipes</h1>

<div class="recipe-grid">
    {% for r in recipe_list %}
    <a href="/recipe/{{ r[0] }}" class="recipe-card">
        <h3>{{ r[1] }}</h3>
        <p>{{ r[2][:100] }}...</p>
    </a>
    {% endfor %}
</div>

{% else %}
<!-- DETAIL MODE -->
<h1>{{ recipe.title }}</h1>
<p>{{ recipe.description }}</p>

<!-- Basic info -->
<div class="info-box">
    <p><strong>Cook Time:</strong> {{ recipe.cook_time_min }} min</p>
    <p><strong>Servings:</strong> {{ recipe.servings }}</p>
</div>

<!-- Ingredients -->
<h2>Ingredients</h2>
<ul>
    {% for ing in ingredients %}
    <li>{{ ing.name }} — {{ ing.qty }}</li>
    {% endfor %}
</ul>

<!-- Instructions -->
<h2>Instructions</h2>
<ol>
    {% for step in recipe.instructions.split('\n') %}
        <li>
            {{
                step.split('. ', 1)[1]
                    .replace('°F', 'F')
                    .replace('°', '')
                    .replace('Â°', '')
            }}
        </li>


    {% endfor %}
</ol>

<!-- Tags -->
<h2>Tags</h2>
<div class="tag-box">
    {% for t in tags %}
    <span class="tag">{{ t }}</span>
    {% endfor %}
</div>

<!-- Comments -->
<h2>Comments</h2>
<ul class="comment-box">
    {% for c in comments %}
        <li><strong>Rating:</strong> {{ c[0] }}/5</li>
    {% endfor %}
</ul>

{% endif %}

{% endblock %}
